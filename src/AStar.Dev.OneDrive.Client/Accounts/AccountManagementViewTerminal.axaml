<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AStar.Dev.OneDrive.Client.Accounts"
             x:Class="AStar.Dev.OneDrive.Client.Accounts.AccountManagementViewTerminal"
             x:DataType="vm:AccountManagementViewModel"
             FontFamily="Consolas, monospace">

    <Design.DataContext>
        <vm:AccountManagementViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="6" Margin="0,0,0,16">
            <TextBlock Text=">> CONNECTED_ACCOUNTS" FontSize="13" Foreground="#00FF41" FontWeight="Bold"/>
            <TextBlock Text="   [Managing cloud storage access points]" FontSize="10" Foreground="#00AA33"/>
        </StackPanel>

        <!-- Accounts List -->
        <ScrollViewer Grid.Row="1">
            <ListBox ItemsSource="{Binding Accounts}"
                     SelectedItem="{Binding SelectedAccount}"
                     Background="Transparent"
                     BorderThickness="0">
                <ListBox.Styles>
                    <Style Selector="ListBoxItem">
                        <Setter Property="Padding" Value="0"/>
                        <Setter Property="Margin" Value="0,0,0,12"/>
                    </Style>
                    <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                        <Setter Property="Background" Value="#002200"/>
                    </Style>
                    <Style Selector="ListBox:empty">
                        <Setter Property="Template">
                            <ControlTemplate>
                                <Border Background="#110000" BorderBrush="#FF0000" BorderThickness="1"
                                        Padding="24" MinHeight="180">
                                    <StackPanel Spacing="8" VerticalAlignment="Center">
                                        <TextBlock Text="[!] NO ACCOUNTS DETECTED" FontSize="12"
                                                   Foreground="#FF0000" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text=">> Execute ADD_ACCOUNT command to initialize connection"
                                                   FontSize="10" Foreground="#AA0000" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </ControlTemplate>
                        </Setter>
                    </Style>
                </ListBox.Styles>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#001100" BorderBrush="#00FF41" BorderThickness="1" Padding="12">
                            <Grid RowDefinitions="Auto,Auto,Auto">
                                <TextBlock Grid.Row="0" Text="{Binding DisplayName, StringFormat='USER: {0}'}"
                                           Foreground="#00FF41" FontSize="12" FontWeight="Bold"/>
                                <TextBlock Grid.Row="1" Text="{Binding AccountId, StringFormat='ID: {0}'}"
                                           Foreground="#00AA33" FontSize="10" Margin="0,4,0,0"/>
                                <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,6,0,0">
                                    <TextBlock Text="[STATUS:" Foreground="#00AA33" FontSize="10"/>
                                    <TextBlock Text="{Binding IsAuthenticated, Converter={StaticResource BoolToStatusTextConverter}}"
                                               Foreground="{Binding IsAuthenticated, Converter={StaticResource BoolToTerminalColorConverter}}"
                                               FontSize="10" FontWeight="Bold"/>
                                    <TextBlock Text="]" Foreground="#00AA33" FontSize="10"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer>

        <!-- Command Buttons -->
        <Grid Grid.Row="2" ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" Margin="0,16,0,0">
            <Button Grid.Row="0" Grid.Column="0" Content="[+] ADD" Command="{Binding AddAccountCommand}"
                    Classes="neon" HorizontalAlignment="Stretch" Height="40" Margin="0,0,4,0"/>
            <Button Grid.Row="0" Grid.Column="1" Content="[-] REMOVE" Command="{Binding RemoveAccountCommand}"
                    Classes="neon-red" HorizontalAlignment="Stretch" Height="40" Margin="4,0,0,0"/>
            <Button Grid.Row="1" Grid.Column="0" Content="[&gt;] LOGIN" Command="{Binding LoginCommand}"
                    Classes="neon" HorizontalAlignment="Stretch" Height="40" Margin="0,8,4,0"/>
            <Button Grid.Row="1" Grid.Column="1" Content="[&lt;] LOGOUT" Command="{Binding LogoutCommand}"
                    Classes="neon" HorizontalAlignment="Stretch" Height="40" Margin="4,8,0,0"/>
        </Grid>

        <!-- Terminal Toast -->
        <Border Grid.Row="0" Grid.RowSpan="3"
                IsVisible="{Binding ToastVisible}"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="0,10,0,0">
            <Border Background="#001100" BorderBrush="#00FF41" BorderThickness="2"
                    Padding="16,10">
                <TextBlock Text="{Binding ToastMessage, StringFormat='>> {0}'}"
                           Foreground="#00FF41" FontSize="11" FontWeight="Bold"/>
            </Border>
        </Border>

        <!-- Loading -->
        <Border Grid.Row="0" Grid.RowSpan="3"
                Background="#E0000000"
                IsVisible="{Binding IsLoading}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                <TextBlock Text="████████" Foreground="#00FF41" FontSize="20" HorizontalAlignment="Center"/>
                <TextBlock Text="[LOADING...]" Foreground="#00FF41" FontSize="12" FontWeight="Bold"/>
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Foreground="#00FF41"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
